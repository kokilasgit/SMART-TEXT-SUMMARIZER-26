{% extends "base.html" %}

{% block title %}Profile - Smart Text Summarizer{% endblock %}

{% block body_class %}app-page{% endblock %}

{% block content %}
<div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <span class="logo-icon">üìù</span>
            <h2>Smart Summarizer</h2>
        </div>

        <nav class="sidebar-nav">
            <a href="{{ url_for('user.dashboard') }}" class="nav-item">
                <span class="nav-icon">üè†</span>
                <span>Dashboard</span>
            </a>
            <a href="{{ url_for('user.summarize') }}" class="nav-item">
                <span class="nav-icon">‚ú®</span>
                <span>Summarize</span>
            </a>
            <a href="{{ url_for('user.history') }}" class="nav-item">
                <span class="nav-icon">üìã</span>
                <span>History</span>
            </a>
            <a href="{{ url_for('user.profile') }}" class="nav-item active">
                <span class="nav-icon">üë§</span>
                <span>Profile</span>
            </a>
            <a href="{{ url_for('user.notifications') }}" class="nav-item">
                <span class="nav-icon">üîî</span>
                <span>Notifications</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="{{ url_for('auth.logout') }}" class="nav-item logout">
                <span class="nav-icon">üö™</span>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="page-header">
            <h1>Profile Settings</h1>
            <p class="text-muted">Manage your account information</p>
        </header>

        <div class="profile-container">
            <!-- Profile Info -->
            <div class="profile-card">
                <div class="profile-header">
                    <div class="avatar">{{ current_user.name[0]|upper }}</div>
                    <div class="profile-info">
                        <h2>{{ current_user.name }}</h2>
                        <p>{{ current_user.email }}</p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="profile-stat">
                        <span class="stat-value">{{ current_user.get_summary_count() }}</span>
                        <span class="stat-label">Summaries</span>
                    </div>
                    <div class="profile-stat">
                        <span class="stat-value">{{ format_date(current_user.created_at) }}</span>
                        <span class="stat-label">Member Since</span>
                    </div>
                </div>
            </div>

            <!-- Update Profile Form -->
            <div class="settings-card">
                <h3>Update Profile</h3>
                <form method="POST" action="{{ url_for('user.profile') }}">
                    <input type="hidden" name="action" value="update_profile">

                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" name="name" value="{{ current_user.name }}" required>
                    </div>

                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" value="{{ current_user.email }}" disabled>
                        <small class="form-hint">Email cannot be changed</small>
                    </div>

                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </div>

            <!-- Change Password Form -->
            <div class="settings-card">
                <h3>Change Password</h3>
                <form method="POST" action="{{ url_for('user.profile') }}">
                    <input type="hidden" name="action" value="change_password">

                    <div class="form-group">
                        <label for="current_password">Current Password</label>
                        <input type="password" id="current_password" name="current_password" required>
                    </div>

                    <div class="form-group">
                        <label for="new_password">New Password</label>
                        <input type="password" id="new_password" name="new_password" required minlength="6"
                            placeholder="Minimum 6 characters">
                    </div>

                    <div class="form-group">
                        <label for="confirm_password">Confirm New Password</label>
                        <input type="password" id="confirm_password" name="confirm_password" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Change Password</button>
                </form>
            </div>
        </div>
    </main>
</div>
{% endblock %}